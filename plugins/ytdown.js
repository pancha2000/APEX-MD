// plugins/yt.js

const yt = require('yt-search');
const dylux = require('api-dylux');

// command.js ‡∂ú‡∑ú‡∂±‡∑î‡∑Ä‡∑ô‡∂±‡∑ä cmd ‡∑Å‡∑ä‚Äç‡∂ª‡∑í‡∂≠‡∂∫ import ‡∂ö‡∂ª‡∂ú‡∂±‡∑ä‡∂±.
// ‡∂î‡∂∂‡∂ú‡∑ö plugins ‡∑Ü‡∑ù‡∂Ω‡∑ä‡∂©‡∂ª‡∂∫ root folder ‡∂ë‡∂ö‡∂ß ‡∑É‡∑è‡∂¥‡∑ö‡∂ö‡∑ä‡∑Ç‡∑Ä command.js ‡∂ú‡∑ú‡∂±‡∑î‡∑Ä‡∂ß ‡∂¥‡∑í‡∑Ä‡∑í‡∑É‡∑ì‡∂∏‡∂ß '..' ‡∂Ö‡∑Ä‡∑Å‡∑ä‚Äç‡∂∫ ‡∑Ä‡∑ö.
const { cmd } = require('../command'); 

// --- SONG COMMAND ---
// YouTube ‡∂ú‡∑ì‡∂≠ ‡∂∂‡∑è‡∂ú‡∂≠ ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏ ‡∑É‡∂≥‡∑Ñ‡∑è ‡∑Ä‡∑í‡∂∞‡∑è‡∂±‡∂∫
cmd({
    pattern: 'song', // ‡∑Ä‡∑í‡∂∞‡∑è‡∂±‡∂∫ ‡∂ö‡∑ä‚Äç‡∂ª‡∑í‡∂∫‡∑è‡∂≠‡∑ä‡∂∏‡∂ö ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∂ß ‡∂∑‡∑è‡∑Ä‡∑í‡∂≠‡∑è ‡∂ö‡∂ª‡∂± ‡∂ª‡∂ß‡∑è‡∑Ä (‡∂ã‡∂Ø‡∑è: /song)
    desc: 'YouTube ‡∂ú‡∑ì‡∂≠ ‡∂∂‡∑è‡∂ú‡∂≠ ‡∂ö‡∂ª‡∂±‡∑ä‡∂± (MP3).', // ‡∑Ä‡∑í‡∂∞‡∑è‡∂±‡∂∫‡∑ö ‡∑Ä‡∑í‡∑É‡∑ä‡∂≠‡∂ª‡∂∫
    usage: '<search query>', // ‡∂∑‡∑è‡∑Ä‡∑í‡∂≠‡∂∫ ‡∂¥‡∑í‡∑Ö‡∑í‡∂∂‡∂≥ ‡∂ã‡∂¥‡∂Ø‡∑ô‡∑É‡∑ä
    category: 'downloads', // ‡∂î‡∂∂‡∂ú‡∑ö commands ‡∑É‡∂≥‡∑Ñ‡∑è ‡∂á‡∂≠‡∑í category ‡∂ë‡∂ö‡∂ö‡∑ä ‡∂∏‡∑ô‡∑Ñ‡∑í ‡∑É‡∂≥‡∑Ñ‡∂±‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±
    filename: __filename, // ‡∂∏‡∑ô‡∂∏ ‡∂¥‡∑ä‡∂Ω‡∂ú‡∑í‡∂±‡∂∫‡∑ö ‡∂ú‡∑ú‡∂±‡∑î ‡∂±‡∑è‡∂∏‡∂∫
    react: 'üé∂' // ‡∑Ä‡∑í‡∂∞‡∑è‡∂±‡∂∫ ‡∂ö‡∑ä‚Äç‡∂ª‡∑í‡∂∫‡∑è‡∂≠‡∑ä‡∂∏‡∂ö ‡∑Ä‡∂± ‡∑Ä‡∑í‡∂ß ‡∂∂‡∑ú‡∂ß‡∑ä ‡∂ë‡∂ö ‡∂∫‡∑Ä‡∂± reaction emoji ‡∂ë‡∂ö
}, async (conn, mek, m, { q, reply }) => {
    // q: ‡∑Ä‡∑í‡∂∞‡∑è‡∂±‡∂∫‡∑ô‡∂±‡∑ä ‡∂¥‡∑É‡∑î ‡∂á‡∂≠‡∑í ‡∑É‡∑í‡∂∫‡∂Ω‡∑î arguments string ‡∂ë‡∂ö‡∂ö‡∑ä ‡∂Ω‡∑ô‡∑É
    // reply: index.js ‡∂∏‡∂ú‡∑í‡∂±‡∑ä ‡∑É‡∂¥‡∂∫‡∂± ‡∂Ω‡∂Ø message.reply ‡∑Ä‡∑ê‡∂±‡∑í ‡∂ö‡∑ä‚Äç‡∂ª‡∑í‡∂∫‡∑è‡∂ö‡∑è‡∂ª‡∑ì‡∂≠‡∑ä‡∑Ä‡∂∫ ‡∑É‡∑Ñ‡∑í‡∂≠ ‡∑Å‡∑ä‚Äç‡∂ª‡∑í‡∂≠‡∂∫
    // conn: Baileys connection object ‡∂ë‡∂ö (‡∂î‡∂∂‡∑ö index.js ‡∂∏‡∂ú‡∑í‡∂±‡∑ä conn.sendFileUrl ‡∂ë‡∂ö‡∂ß ‡∂∏‡∑ô‡∂∫ ‡∂Ö‡∑Ä‡∑Å‡∑ä‚Äç‡∂∫ ‡∑Ä‡∑ö)
    // m: sms.js ‡∂∏‡∂ú‡∑í‡∂±‡∑ä ‡∑É‡∂ö‡∑É‡∑ä ‡∂ö‡∂ª‡∂± ‡∂Ω‡∂Ø simplified message object ‡∂ë‡∂ö (m.chat, m.quoted ‡∑Ä‡∑ê‡∂±‡∑í ‡∂Ø‡∑ö ‡∂á‡∂≠)

    if (!q) {
        return reply("‡∂î‡∂∂‡∂ß ‡∂Ö‡∑Ä‡∑Å‡∑ä‚Äç‡∂∫ ‡∂ú‡∑ì‡∂≠‡∂∫ ‡∑É‡∑ô‡∑Ä‡∑ì‡∂∏‡∂ß ‡∂±‡∂∏‡∂ö‡∑ä ‡∑É‡∂≥‡∑Ñ‡∂±‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.\n‡∂∑‡∑è‡∑Ä‡∑í‡∂≠‡∂∫: `/song <song name>`\n‡∂ã‡∂Ø‡∑è: `/song Faded Alan Walker`");
    }

    await reply("‡∑É‡∑ú‡∂∫‡∂∏‡∑í‡∂±‡∑ä ‡∑É‡∑í‡∂ß‡∑ì... ‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∂ö‡∂ª ‡∂ª‡∑ê‡∂≥‡∑ì ‡∑É‡∑í‡∂ß‡∑í‡∂±‡∑ä‡∂±.");

    try {
        // YouTube ‡∑Ñ‡∑í ‡∑Ä‡∑ì‡∂©‡∑í‡∂∫‡∑ù ‡∑É‡∑ú‡∂∫‡∂±‡∑ä‡∂±
        const videos = await yt.search(q);

        if (!videos.videos.length) {
            return reply("‡∂∏‡∂ß ‡∂ö‡∑í‡∑É‡∑í‡∂Ø‡∑î ‡∂ú‡∑ì‡∂≠‡∂∫‡∂ö‡∑ä ‡∑É‡∑ú‡∂∫‡∑è‡∂ú‡∂≠ ‡∂±‡∑ú‡∑Ñ‡∑ê‡∂ö‡∑í ‡∑Ä‡∑í‡∂∫. ‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∂ö‡∂ª ‡∑Ä‡∑ô‡∂±‡∂≠‡∑ä ‡∂±‡∂∏‡∂ö‡∑ä ‡∂ã‡∂≠‡∑ä‡∑É‡∑è‡∑Ñ ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.");
        }

        // ‡∂¥‡∑Ö‡∂∏‡∑î ‡∂¥‡∑ä‚Äç‡∂ª‡∂≠‡∑í‡∂µ‡∂Ω‡∂∫ ‡∂≠‡∑ù‡∂ª‡∑è ‡∂ú‡∂±‡∑ä‡∂±
        const video = videos.videos[0];

        await reply(`'${video.title}' ‡∂ú‡∑ì‡∂≠‡∂∫ ‡∂∂‡∑è‡∂ú‡∂≠ ‡∂ö‡∂ª‡∂∏‡∑í‡∂±‡∑ä ‡∑É‡∑í‡∂ß‡∑ì... (‡∂∏‡∑ô‡∂∫‡∂ß ‡∂ß‡∑í‡∂ö ‡∑Ä‡∑ö‡∂Ω‡∑è‡∑Ä‡∂ö‡∑ä ‡∂ú‡∂≠ ‡∑Ä‡∑í‡∂∫ ‡∑Ñ‡∑ê‡∂ö)`);

        // api-dylux ‡∂∑‡∑è‡∑Ä‡∑í‡∂≠‡∂∫‡∑ô‡∂±‡∑ä MP3 ‡∂∂‡∑è‡∂ú‡∂≠ ‡∂ö‡∂ª‡∂±‡∑ä‡∂±
        const downloadResult = await dylux.ytmp3(video.url);

        if (!downloadResult || !downloadResult.url) {
            return reply(`'${video.title}' ‡∂ú‡∑ì‡∂≠‡∂∫ ‡∂∂‡∑è‡∂ú‡∂≠ ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∑ö‡∂Ø‡∑ì ‡∂Ø‡∑ù‡∑Ç‡∂∫‡∂ö‡∑ä ‡∑É‡∑í‡∂Ø‡∑î‡∑Ä‡∑í‡∂∫. ‡∂Ö‡∑É‡∂∏‡∑ä‡∂¥‡∑ñ‡∂ª‡∑ä‡∂´ ‡∂¥‡∑ä‚Äç‡∂ª‡∂≠‡∑í‡∂†‡∑è‡∂ª‡∂∫‡∂ö‡∑ä ‡∂Ω‡∑ê‡∂∂‡∑î‡∂´‡∑í.`);
        }

        const captionText = `*${downloadResult.title}*\n\n_‡∂∂‡∑è‡∂ú‡∂≠ ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∑ö ‡∑É‡∂∂‡∑ê‡∂≥‡∑í‡∂∫:_ ${downloadResult.url}\n_‡∂ú‡∑ú‡∂±‡∑î ‡∂¥‡∑ä‚Äç‡∂ª‡∂∏‡∑è‡∂´‡∂∫:_ ${downloadResult.filesize || 'N/A'}`;

        // ‡∂î‡∂∂‡∂ú‡∑ö index.js ‡∂∏‡∂ú‡∑í‡∂±‡∑ä conn object ‡∂ë‡∂ö‡∂ß ‡∂ë‡∂ö‡∂≠‡∑î ‡∂ö‡∂ª‡∂± ‡∂Ω‡∂Ø sendFileUrl ‡∑Å‡∑ä‚Äç‡∂ª‡∑í‡∂≠‡∂∫ ‡∂∑‡∑è‡∑Ä‡∑í‡∂≠‡∑è ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.
        // ‡∂∏‡∑ô‡∂∫ ‡∂∏‡∂ú‡∑í‡∂±‡∑ä Baileys ‡∑Ñ‡∂ª‡∑Ñ‡∑è ‡∂ú‡∑ú‡∂±‡∑î ‡∂∫‡∑ê‡∑Ä‡∑ì‡∂∏ ‡∑Ä‡∂©‡∑è‡∂≠‡∑ä ‡∂¥‡∑Ñ‡∑É‡∑î ‡∑É‡∑Ñ ‡∂ö‡∑è‡∂ª‡∑ä‡∂∫‡∂ö‡∑ä‡∑Ç‡∂∏ ‡∑Ä‡∑ö.
        await conn.sendFileUrl(m.chat, downloadResult.url, captionText, m);

    } catch (error) {
        console.error("YouTube Song Download Error:", error);
        // ‡∂Ø‡∑ù‡∑Ç‡∂∫ ‡∂¥‡∑í‡∑Ö‡∑í‡∂∂‡∂≥‡∑Ä ‡∂¥‡∂ª‡∑í‡∑Å‡∑ì‡∂Ω‡∂ö‡∂∫‡∑è‡∂ß ‡∂Ø‡∑ê‡∂±‡∑î‡∂∏‡∑ä ‡∂Ø‡∑ô‡∂±‡∑ä‡∂±.
        if (error.message.includes("403") || error.message.includes("failed to retrieve")) {
            await reply("‡∂∂‡∑è‡∂ú‡∂≠ ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∑ö‡∂Ø‡∑ì ‡∂Ø‡∑ù‡∑Ç‡∂∫‡∂ö‡∑ä ‡∑É‡∑í‡∂Ø‡∑î‡∑Ä‡∑í‡∂∫. ‡∑É‡∂∏‡∑Ñ‡∂ª‡∑Ä‡∑í‡∂ß ‡∂∏‡∑ô‡∂∏ ‡∂ú‡∑ì‡∂≠‡∂∫ ‡∂∂‡∑è‡∂ú‡∂≠ ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∂ß ‡∂±‡∑ú‡∑Ñ‡∑ê‡∂ö‡∑í ‡∑Ä‡∑í‡∂∫ ‡∑Ñ‡∑ê‡∂ö (‡∂ã‡∂Ø‡∑è: ‡∑Ä‡∂∫‡∑É ‡∑É‡∑ì‡∂∏‡∑è ‡∂ö‡∑Ö).");
        } else {
            await reply("‡∂ú‡∑ì‡∂≠‡∂∫ ‡∂∂‡∑è‡∂ú‡∂≠ ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∑ö‡∂Ø‡∑ì ‡∂Ø‡∑ù‡∑Ç‡∂∫‡∂ö‡∑ä ‡∑É‡∑í‡∂Ø‡∑î‡∑Ä‡∑í‡∂∫. ‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∂ö‡∂ª ‡∂±‡∑ê‡∑Ä‡∂≠ ‡∂ã‡∂≠‡∑ä‡∑É‡∑è‡∑Ñ ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.");
        }
    }
});

// --- VIDEO COMMAND ---
// YouTube ‡∑Ä‡∑ì‡∂©‡∑í‡∂∫‡∑ù ‡∂∂‡∑è‡∂ú‡∂≠ ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏ ‡∑É‡∂≥‡∑Ñ‡∑è ‡∑Ä‡∑í‡∂∞‡∑è‡∂±‡∂∫
cmd({
    pattern: 'video', // ‡∑Ä‡∑í‡∂∞‡∑è‡∂±‡∂∫ ‡∂ö‡∑ä‚Äç‡∂ª‡∑í‡∂∫‡∑è‡∂≠‡∑ä‡∂∏‡∂ö ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∂ß ‡∂∑‡∑è‡∑Ä‡∑í‡∂≠‡∑è ‡∂ö‡∂ª‡∂± ‡∂ª‡∂ß‡∑è‡∑Ä (‡∂ã‡∂Ø‡∑è: /video)
    desc: 'YouTube ‡∑Ä‡∑ì‡∂©‡∑í‡∂∫‡∑ù ‡∂∂‡∑è‡∂ú‡∂≠ ‡∂ö‡∂ª‡∂±‡∑ä‡∂± (MP4).', // ‡∑Ä‡∑í‡∂∞‡∑è‡∂±‡∂∫‡∑ö ‡∑Ä‡∑í‡∑É‡∑ä‡∂≠‡∂ª‡∂∫
    usage: '<search query>', // ‡∂∑‡∑è‡∑Ä‡∑í‡∂≠‡∂∫ ‡∂¥‡∑í‡∑Ö‡∑í‡∂∂‡∂≥ ‡∂ã‡∂¥‡∂Ø‡∑ô‡∑É‡∑ä
    category: 'downloads', // ‡∂î‡∂∂‡∂ú‡∑ö commands ‡∑É‡∂≥‡∑Ñ‡∑è ‡∂á‡∂≠‡∑í category ‡∂ë‡∂ö‡∂ö‡∑ä ‡∂∏‡∑ô‡∑Ñ‡∑í ‡∑É‡∂≥‡∑Ñ‡∂±‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±
    filename: __filename, // ‡∂∏‡∑ô‡∂∏ ‡∂¥‡∑ä‡∂Ω‡∂ú‡∑í‡∂±‡∂∫‡∑ö ‡∂ú‡∑ú‡∂±‡∑î ‡∂±‡∑è‡∂∏‡∂∫
    react: 'üé¨' // ‡∑Ä‡∑í‡∂∞‡∑è‡∂±‡∂∫ ‡∂ö‡∑ä‚Äç‡∂ª‡∑í‡∂∫‡∑è‡∂≠‡∑ä‡∂∏‡∂ö ‡∑Ä‡∂± ‡∑Ä‡∑í‡∂ß ‡∂∂‡∑ú‡∂ß‡∑ä ‡∂ë‡∂ö ‡∂∫‡∑Ä‡∂± reaction emoji ‡∂ë‡∂ö
}, async (conn, mek, m, { q, reply }) => {
    // q: ‡∑Ä‡∑í‡∂∞‡∑è‡∂±‡∂∫‡∑ô‡∂±‡∑ä ‡∂¥‡∑É‡∑î ‡∂á‡∂≠‡∑í ‡∑É‡∑í‡∂∫‡∂Ω‡∑î arguments string ‡∂ë‡∂ö‡∂ö‡∑ä ‡∂Ω‡∑ô‡∑É
    // reply: index.js ‡∂∏‡∂ú‡∑í‡∂±‡∑ä ‡∑É‡∂¥‡∂∫‡∂± ‡∂Ω‡∂Ø message.reply ‡∑Ä‡∑ê‡∂±‡∑í ‡∂ö‡∑ä‚Äç‡∂ª‡∑í‡∂∫‡∑è‡∂ö‡∑è‡∂ª‡∑ì‡∂≠‡∑ä‡∑Ä‡∂∫ ‡∑É‡∑Ñ‡∑í‡∂≠ ‡∑Å‡∑ä‚Äç‡∂ª‡∑í‡∂≠‡∂∫
    // conn: Baileys connection object ‡∂ë‡∂ö
    // m: sms.js ‡∂∏‡∂ú‡∑í‡∂±‡∑ä ‡∑É‡∂ö‡∑É‡∑ä ‡∂ö‡∂ª‡∂± ‡∂Ω‡∂Ø simplified message object ‡∂ë‡∂ö

    if (!q) {
        return reply("‡∂î‡∂∂‡∂ß ‡∂Ö‡∑Ä‡∑Å‡∑ä‚Äç‡∂∫ ‡∑Ä‡∑ì‡∂©‡∑í‡∂∫‡∑ù‡∑Ä ‡∑É‡∑ô‡∑Ä‡∑ì‡∂∏‡∂ß ‡∂±‡∂∏‡∂ö‡∑ä ‡∑É‡∂≥‡∑Ñ‡∂±‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.\n‡∂∑‡∑è‡∑Ä‡∑í‡∂≠‡∂∫: `/video <video name>`\n‡∂ã‡∂Ø‡∑è: `/video How to Train Your Dragon trailer`");
    }

    await reply("‡∑É‡∑ú‡∂∫‡∂∏‡∑í‡∂±‡∑ä ‡∑É‡∑í‡∂ß‡∑ì... ‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∂ö‡∂ª ‡∂ª‡∑ê‡∂≥‡∑ì ‡∑É‡∑í‡∂ß‡∑í‡∂±‡∑ä‡∂±.");

    try {
        // YouTube ‡∑Ñ‡∑í ‡∑Ä‡∑ì‡∂©‡∑í‡∂∫‡∑ù ‡∑É‡∑ú‡∂∫‡∂±‡∑ä‡∂±
        const videos = await yt.search(q);

        if (!videos.videos.length) {
            return reply("‡∂∏‡∂ß ‡∂ö‡∑í‡∑É‡∑í‡∂Ø‡∑î ‡∑Ä‡∑ì‡∂©‡∑í‡∂∫‡∑ù‡∑Ä‡∂ö‡∑ä ‡∑É‡∑ú‡∂∫‡∑è‡∂ú‡∂≠ ‡∂±‡∑ú‡∑Ñ‡∑ê‡∂ö‡∑í ‡∑Ä‡∑í‡∂∫. ‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∂ö‡∂ª ‡∑Ä‡∑ô‡∂±‡∂≠‡∑ä ‡∂±‡∂∏‡∂ö‡∑ä ‡∂ã‡∂≠‡∑ä‡∑É‡∑è‡∑Ñ ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.");
        }

        // ‡∂¥‡∑Ö‡∂∏‡∑î ‡∂¥‡∑ä‚Äç‡∂ª‡∂≠‡∑í‡∂µ‡∂Ω‡∂∫ ‡∂≠‡∑ù‡∂ª‡∑è ‡∂ú‡∂±‡∑ä‡∂±
        const video = videos.videos[0];

        await reply(`'${video.title}' ‡∑Ä‡∑ì‡∂©‡∑í‡∂∫‡∑ù‡∑Ä ‡∂∂‡∑è‡∂ú‡∂≠ ‡∂ö‡∂ª‡∂∏‡∑í‡∂±‡∑ä ‡∑É‡∑í‡∂ß‡∑ì... (‡∂∏‡∑ô‡∂∫‡∂ß ‡∂ß‡∑í‡∂ö ‡∑Ä‡∑ö‡∂Ω‡∑è‡∑Ä‡∂ö‡∑ä ‡∂ú‡∂≠ ‡∑Ä‡∑í‡∂∫ ‡∑Ñ‡∑ê‡∂ö)`);

        // api-dylux ‡∂∑‡∑è‡∑Ä‡∑í‡∂≠‡∂∫‡∑ô‡∂±‡∑ä MP4 ‡∂∂‡∑è‡∂ú‡∂≠ ‡∂ö‡∂ª‡∂±‡∑ä‡∂±
        const downloadResult = await dylux.ytmp4(video.url);

        if (!downloadResult || !downloadResult.url) {
            return reply(`'${video.title}' ‡∑Ä‡∑ì‡∂©‡∑í‡∂∫‡∑ù‡∑Ä ‡∂∂‡∑è‡∂ú‡∂≠ ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∑ö‡∂Ø‡∑ì ‡∂Ø‡∑ù‡∑Ç‡∂∫‡∂ö‡∑ä ‡∑É‡∑í‡∂Ø‡∑î‡∑Ä‡∑í‡∂∫. ‡∂Ö‡∑É‡∂∏‡∑ä‡∂¥‡∑ñ‡∂ª‡∑ä‡∂´ ‡∂¥‡∑ä‚Äç‡∂ª‡∂≠‡∑í‡∂†‡∑è‡∂ª‡∂∫‡∂ö‡∑ä ‡∂Ω‡∑ê‡∂∂‡∑î‡∂´‡∑í.`);
        }

        const captionText = `*${downloadResult.title}*\n\n_‡∂∂‡∑è‡∂ú‡∂≠ ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∑ö ‡∑É‡∂∂‡∑ê‡∂≥‡∑í‡∂∫:_ ${downloadResult.url}\n_‡∂ú‡∑ú‡∂±‡∑î ‡∂¥‡∑ä‚Äç‡∂ª‡∂∏‡∑è‡∂´‡∂∫:_ ${downloadResult.filesize || 'N/A'}`;

        // ‡∂î‡∂∂‡∂ú‡∑ö index.js ‡∂∏‡∂ú‡∑í‡∂±‡∑ä conn object ‡∂ë‡∂ö‡∂ß ‡∂ë‡∂ö‡∂≠‡∑î ‡∂ö‡∂ª‡∂± ‡∂Ω‡∂Ø sendFileUrl ‡∑Å‡∑ä‚Äç‡∂ª‡∑í‡∂≠‡∂∫ ‡∂∑‡∑è‡∑Ä‡∑í‡∂≠‡∑è ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.
        await conn.sendFileUrl(m.chat, downloadResult.url, captionText, m);

    } catch (error) {
        console.error("YouTube Video Download Error:", error);
        if (error.message.includes("403") || error.message.includes("failed to retrieve")) {
            await reply("‡∂∂‡∑è‡∂ú‡∂≠ ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∑ö‡∂Ø‡∑ì ‡∂Ø‡∑ù‡∑Ç‡∂∫‡∂ö‡∑ä ‡∑É‡∑í‡∂Ø‡∑î‡∑Ä‡∑í‡∂∫. ‡∑É‡∂∏‡∑Ñ‡∂ª‡∑Ä‡∑í‡∂ß ‡∂∏‡∑ô‡∂∏ ‡∑Ä‡∑ì‡∂©‡∑í‡∂∫‡∑ù‡∑Ä ‡∂∂‡∑è‡∂ú‡∂≠ ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∂ß ‡∂±‡∑ú‡∑Ñ‡∑ê‡∂ö‡∑í ‡∑Ä‡∑í‡∂∫ ‡∑Ñ‡∑ê‡∂ö (‡∂ã‡∂Ø‡∑è: ‡∑Ä‡∂∫‡∑É ‡∑É‡∑ì‡∂∏‡∑è ‡∂ö‡∑Ö).");
        } else {
            await reply("‡∑Ä‡∑ì‡∂©‡∑í‡∂∫‡∑ù‡∑Ä ‡∂∂‡∑è‡∂ú‡∂≠ ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∑ö‡∂Ø‡∑ì ‡∂Ø‡∑ù‡∑Ç‡∂∫‡∂ö‡∑ä ‡∑É‡∑í‡∂Ø‡∑î‡∑Ä‡∑í‡∂∫. ‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∂ö‡∂ª ‡∂±‡∑ê‡∑Ä‡∂≠ ‡∂ã‡∂≠‡∑ä‡∑É‡∑è‡∑Ñ ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.");
        }
    }
});